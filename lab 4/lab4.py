from abc import ABC, abstractmethod  # –Ü–º–ø–æ—Ä—Ç—É—î–º–æ –º–æ–¥—É–ª—ñ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∏—Ö –∫–ª–∞—Å—ñ–≤

# ----------------- Composite -----------------
# –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∏–π –±–∞–∑–æ–≤–∏–π –∫–ª–∞—Å –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ —Ñ–∞–π–ª–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏ (—Ñ–∞–π–ª—ñ–≤ —ñ –ø–∞–ø–æ–∫)
class Component(ABC):
    @abstractmethod
    def show(self, indent=0):  # –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∏–π –º–µ—Ç–æ–¥ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∑ –≤—ñ–¥—Å—Ç—É–ø–æ–º
        pass

# –ö–ª–∞—Å, —â–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î —Ñ–∞–π–ª ‚Äî –õ–∏—Å—Ç–æ–∫ (Leaf) —É –ø–∞—Ç–µ—Ä–Ω—ñ Composite
class File(Component):
    def __init__(self, name):  # –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, –ø—Ä–∏–π–º–∞—î –Ω–∞–∑–≤—É —Ñ–∞–π–ª—É
        self.name = name       # –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –Ω–∞–∑–≤—É —Ñ–∞–π–ª—É —É –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å

    def show(self, indent=0):  # –ú–µ—Ç–æ–¥ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—É
        print("  " * indent + f"- –§–∞–π–ª: {self.name}")  # –í–∏–≤–æ–¥–∏–º–æ –Ω–∞–∑–≤—É –∑ –≤—ñ–¥—Å—Ç—É–ø–æ–º

# –ö–ª–∞—Å, —â–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î –ø–∞–ø–∫—É ‚Äî –ö–æ–º–ø–æ–Ω–µ–Ω—Ç, —è–∫–∏–π –º–æ–∂–µ –º—ñ—Å—Ç–∏—Ç–∏ —ñ–Ω—à–∏—Ö (Composite)
class Folder(Component):
    def __init__(self, name):  # –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, –ø—Ä–∏–π–º–∞—î –Ω–∞–∑–≤—É –ø–∞–ø–∫–∏
        self.name = name       # –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –Ω–∞–∑–≤—É –ø–∞–ø–∫–∏
        self.children = []     # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ —Å–ø–∏—Å–æ–∫ –¥–æ—á—ñ—Ä–Ω—ñ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤

    def add(self, component):  # –ú–µ—Ç–æ–¥ –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –¥–æ—á—ñ—Ä–Ω—å–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (—Ñ–∞–π–ª—É –∞–±–æ –ø–∞–ø–∫–∏)
        self.children.append(component)  # –î–æ–¥–∞—î–º–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —É —Å–ø–∏—Å–æ–∫

    def get_subfolder(self, name):  # –ú–µ—Ç–æ–¥ –¥–ª—è –ø–æ—à—É–∫—É –ø—ñ–¥–ø–∞–ø–∫–∏ –∑–∞ –Ω–∞–∑–≤–æ—é
        for child in self.children:  # –ü–µ—Ä–µ–±–∏—Ä–∞—î–º–æ –≤—Å—ñ –¥–æ—á—ñ—Ä–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏
            if isinstance(child, Folder) and child.name == name:  # –Ø–∫—â–æ —Ü–µ –ø–∞–ø–∫–∞ –∑ –ø–æ—Ç—Ä—ñ–±–Ω–æ—é –Ω–∞–∑–≤–æ—é
                return child  # –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ —Ü—é –ø–∞–ø–∫—É
        return None  # –Ø–∫—â–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ ‚Äî –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ None

    def show(self, indent=0):  # –ú–µ—Ç–æ–¥ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–∞–ø–∫–∏ —Ç–∞ —ó—ó –≤–º—ñ—Å—Ç—É
        print("  " * indent + f"+ –ü–∞–ø–∫–∞: {self.name}")  # –í–∏–≤–æ–¥–∏–º–æ –Ω–∞–∑–≤—É –ø–∞–ø–∫–∏ –∑ –≤—ñ–¥—Å—Ç—É–ø–æ–º
        for child in self.children:  # –ü–µ—Ä–µ–±–∏—Ä–∞—î–º–æ –¥–æ—á—ñ—Ä–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏
            child.show(indent + 1)  # –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –≤–∏–∫–ª–∏–∫–∞—î–º–æ show –∑ –±—ñ–ª—å—à–∏–º –≤—ñ–¥—Å—Ç—É–ø–æ–º

# ----------------- Facade -----------------
# –ö–ª–∞—Å-—Ñ–∞—Å–∞–¥, —è–∫–∏–π —Å–ø—Ä–æ—â—É—î —Ä–æ–±–æ—Ç—É –∑ —Ñ–∞–π–ª–æ–≤–æ—é —Å–∏—Å—Ç–µ–º–æ—é
class FileSystem:
    def __init__(self):  # –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
        self.root = Folder("–ì–æ–ª–æ–≤–Ω–∞")  # –°—Ç–≤–æ—Ä—é—î–º–æ –∫–æ—Ä–µ–Ω–µ–≤—É –ø–∞–ø–∫—É –∑ –Ω–∞–∑–≤–æ—é "–ì–æ–ª–æ–≤–Ω–∞"

    def add_file(self, path, file_name):  # –ú–µ—Ç–æ–¥ –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—É –∑–∞ –∑–∞–¥–∞–Ω–∏–º —à–ª—è—Ö–æ–º
        folder = self._navigate(path)  # –ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ—ó –ø–∞–ø–∫–∏
        if folder:  # –Ø–∫—â–æ –ø–∞–ø–∫–∞ –∑–Ω–∞–π–¥–µ–Ω–∞
            folder.add(File(file_name))  # –î–æ–¥–∞—î–º–æ —Ñ–∞–π–ª —É –ø–∞–ø–∫—É

    def add_folder(self, path, folder_name):  # –ú–µ—Ç–æ–¥ –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –ø–∞–ø–∫–∏ –∑–∞ –∑–∞–¥–∞–Ω–∏–º —à–ª—è—Ö–æ–º
        folder = self._navigate(path)  # –ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ—ó –ø–∞–ø–∫–∏
        if folder:  # –Ø–∫—â–æ –ø–∞–ø–∫–∞ –∑–Ω–∞–π–¥–µ–Ω–∞
            new_folder = Folder(folder_name)  # –°—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤—É –ø–∞–ø–∫—É
            folder.add(new_folder)  # –î–æ–¥–∞—î–º–æ —ó—ó –≤ —Å–ø–∏—Å–æ–∫ –¥–æ—á—ñ—Ä–Ω—ñ—Ö

    def _navigate(self, path):  # –í–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π –º–µ—Ç–æ–¥ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥—É –∑–∞ —à–ª—è—Ö–æ–º
        current = self.root  # –ü–æ—á–∏–Ω–∞—î–º–æ –∑ –∫–æ—Ä–µ–Ω–µ–≤–æ—ó –ø–∞–ø–∫–∏
        for name in path:  # –ü–µ—Ä–µ–±–∏—Ä–∞—î–º–æ –∫–æ–∂–Ω—É —á–∞—Å—Ç–∏–Ω—É —à–ª—è—Ö—É
            if not name:  # –Ø–∫—â–æ –Ω–∞–∑–≤–∞ –ø–æ—Ä–æ–∂–Ω—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —á–µ—Ä–µ–∑ –∑–∞–π–≤–∏–π —Å–ª–µ—à), –ø—Ä–æ–ø—É—Å–∫–∞—î–º–æ
                continue
            next_folder = current.get_subfolder(name)  # –®—É–∫–∞—î–º–æ –ø—ñ–¥–ø–∞–ø–∫—É –∑ —Ü—ñ—î—é –Ω–∞–∑–≤–æ—é
            if next_folder:  # –Ø–∫—â–æ –∑–Ω–∞–π—à–ª–∏
                current = next_folder  # –ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –≤ –Ω–µ—ó
            else:  # –Ø–∫—â–æ –Ω–µ –∑–Ω–∞–π—à–ª–∏
                print(f"–ü–∞–ø–∫—É '{name}' –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.")  # –í–∏–≤–æ–¥–∏–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É
                return None  # –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ None ‚Äî —à–ª—è—Ö –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π
        return current  # –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –æ—Å—Ç–∞–Ω–Ω—é –∑–Ω–∞–π–¥–µ–Ω—É –ø–∞–ø–∫—É

    def show(self):  # –ú–µ—Ç–æ–¥ –¥–ª—è –ø–æ–∫–∞–∑—É –≤—Å—ñ—î—ó —Ñ–∞–π–ª–æ–≤–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏
        self.root.show()  # –í–∏–≤–æ–¥–∏–º–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–æ—á–∏–Ω–∞—é—á–∏ –∑ –∫–æ—Ä–µ–Ω–µ–≤–æ—ó –ø–∞–ø–∫–∏

# –û—Å–Ω–æ–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –º–µ–Ω—é
def main():
    fs = FileSystem()  # –°—Ç–≤–æ—Ä—é—î–º–æ –æ–±'—î–∫—Ç —Ñ–∞–π–ª–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏ (—Ñ–∞—Å–∞–¥)

    while True:  # –ó–∞–ø—É—Å–∫–∞—î–º–æ –±–µ–∑–∫—ñ–Ω–µ—á–Ω–∏–π —Ü–∏–∫–ª –º–µ–Ω—é
        print("\n–ú–µ–Ω—é:")  # –í–∏–≤–æ–¥–∏–º–æ –º–µ–Ω—é –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É
        print("1. –î–æ–¥–∞—Ç–∏ –ø–∞–ø–∫—É")
        print("2. –î–æ–¥–∞—Ç–∏ —Ñ–∞–π–ª")
        print("3. –ü–æ–∫–∞–∑–∞—Ç–∏ —Ñ–∞–π–ª–æ–≤—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É")
        print("4. –í–∏–π—Ç–∏")

        choice = input("–û–±–µ—Ä—ñ—Ç—å –æ–ø—Ü—ñ—é (1-4): ")  # –ß–∏—Ç–∞—î–º–æ –≤–∏–±—ñ—Ä –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

        if choice == "1":  # –Ø–∫—â–æ –≤–∏–±—ñ—Ä ‚Äî –¥–æ–¥–∞—Ç–∏ –ø–∞–ø–∫—É
            path_input = input("–í–≤–µ–¥—ñ—Ç—å —à–ª—è—Ö –¥–æ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ—ó –ø–∞–ø–∫–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: –ì–æ–ª–æ–≤–Ω–∞/–î–æ–∫—É–º–µ–Ω—Ç–∏): ").strip()  # –ó—á–∏—Ç—É—î–º–æ —à–ª—è—Ö —ñ –æ–±—Ä—ñ–∑–∞—î–º–æ –ø—Ä–æ–±—ñ–ª–∏
            path = path_input.split("/") if path_input else []  # –ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ —Ä—è–¥–æ–∫ —É —Å–ø–∏—Å–æ–∫ –∞–±–æ —Ä–æ–±–∏–º–æ –ø–æ—Ä–æ–∂–Ω—ñ–π —Å–ø–∏—Å–æ–∫
            folder_name = input("–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –Ω–æ–≤–æ—ó –ø–∞–ø–∫–∏: ")  # –ß–∏—Ç–∞—î–º–æ –Ω–∞–∑–≤—É –Ω–æ–≤–æ—ó –ø–∞–ø–∫–∏
            fs.add_folder(path, folder_name)  # –í–∏–∫–ª–∏–∫–∞—î–º–æ –º–µ—Ç–æ–¥ —Ñ–∞—Å–∞–¥—É –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –ø–∞–ø–∫–∏

        elif choice == "2":  # –Ø–∫—â–æ –≤–∏–±—ñ—Ä ‚Äî –¥–æ–¥–∞—Ç–∏ —Ñ–∞–π–ª
            path_input = input("–í–≤–µ–¥—ñ—Ç—å —à–ª—è—Ö –¥–æ –ø–∞–ø–∫–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: –ì–æ–ª–æ–≤–Ω–∞/–î–æ–∫—É–º–µ–Ω—Ç–∏): ").strip()  # –ó—á–∏—Ç—É—î–º–æ —à–ª—è—Ö
            path = path_input.split("/") if path_input else []  # –û–±—Ä–æ–±–ª—è—î–º–æ —à–ª—è—Ö —É —Å–ø–∏—Å–æ–∫
            file_name = input("–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É —Ñ–∞–π–ª—É: ")  # –ß–∏—Ç–∞—î–º–æ –Ω–∞–∑–≤—É —Ñ–∞–π–ª—É
            fs.add_file(path, file_name)  # –í–∏–∫–ª–∏–∫–∞—î–º–æ –º–µ—Ç–æ–¥ —Ñ–∞—Å–∞–¥—É –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—É

        elif choice == "3":  # –Ø–∫—â–æ –≤–∏–±—ñ—Ä ‚Äî –ø–æ–∫–∞–∑–∞—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É
            print("\nüìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏:")  # –ó–∞–≥–æ–ª–æ–≤–æ–∫
            fs.show()  # –ü–æ–∫–∞–∑—É—î–º–æ –¥–µ—Ä–µ–≤–æ —Ñ–∞–π–ª—ñ–≤ —ñ –ø–∞–ø–æ–∫ —á–µ—Ä–µ–∑ —Ñ–∞—Å–∞–¥

        elif choice == "4":  # –Ø–∫—â–æ –≤–∏–±—ñ—Ä ‚Äî –≤–∏–π—Ç–∏
            print("–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–∞–º–∏.")  # –ü–æ–≤—ñ–¥–æ–º–ª—è—î–º–æ –ø—Ä–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è
            break  # –í–∏—Ö–æ–¥–∏–º–æ –∑ —Ü–∏–∫–ª—É —ñ –∑–∞–≤–µ—Ä—à—É—î–º–æ –ø—Ä–æ–≥—Ä–∞–º—É

        else:  # –Ø–∫—â–æ –≤–∏–±—ñ—Ä –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π
            print("–ù–µ–≤—ñ—Ä–Ω–∏–π –≤–∏–±—ñ—Ä. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.")  # –í–∏–≤–æ–¥–∏–º–æ –ø–æ–º–∏–ª–∫—É

# –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó –ø—Ä–∏ –∑–∞–ø—É—Å–∫—É —Å–∫—Ä–∏–ø—Ç–∞
if __name__ == "__main__":
    main()
